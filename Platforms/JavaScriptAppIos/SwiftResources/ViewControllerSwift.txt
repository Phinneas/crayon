import UIKit
import WebKit

class ViewController: UIViewController, WKScriptMessageHandler {

    override func viewDidLoad() {
        super.viewDidLoad()
        let userController:WKUserContentController = WKUserContentController();
        userController.addScriptMessageHandler(self, name: "interop");
        let webViewConfig = WKWebViewConfiguration();
        webViewConfig.userContentController = userController;
        let webView = WKWebView(frame: self.view.frame, configuration: webViewConfig);
        webView.scrollView.bounces = false;
        webView.scrollView.scrollEnabled = false;
        let htmlPath = NSBundle.mainBundle().URLForResource("index", withExtension: "html", subdirectory: "jsres");
        let request = NSURLRequest(URL: htmlPath!);
        webView.loadRequest(request);
        self.view.addSubview(webView);
    }
    
    func userContentController(userContentController: WKUserContentController, didReceiveScriptMessage message: WKScriptMessage) {
        print(message.body);
    }
}
